{% extends "partials/base.html" %}
{% load humanize %}

{% block title %}Daftar Transaksi Tahunan{% endblock %}

{% block content %}
<div class="p-3 p-md-4">
  <h1>Daftar Transaksi Tahun {{ tahun }}</h1>
  <div class="mt-3 d-flex gap-3">
    <a href="{% url 'laporan' %}" class="btn btn-primary">Kembali</a>
    <a href="{% url 'export_tahunan' tahun %}" class="btn btn-success">Export CSV</a>
  </div>
  <div class="table-responsive mt-3">
    <table class="table table-striped">
      <tr>
        <th>No</th>
        <th>Tanggal</th>
        <th>Jenis</th>
        <th>Kategori</th>
        <th>Jumlah</th>
      </tr>
      {% for t in transaksi %}
      <tr>
        <td>{{ forloop.counter }}</td>
        <td>{{ t.created_at|date:"d/m/Y" }}</td>
        <td>{{ t.get_jenis_display }}</td>
        <td>{{ t.kategori_transaksi }}</td>
        <td>Rp {{ t.jumlah|intcomma }}</td>
      </tr>
      {% endfor %}
    </table>
  </div>
  <!-- pagination -->
  <div class="d-flex justify-content-center gap-3 align-items-center mt-3">
    {% if transaksi.has_previous %}
    <a href="?page={{ transaksi.previous_page_number }}" class="btn btn-outline-secondary">
      <i class="bi bi-chevron-double-left fs-4"></i>
    </a>
    {% endif %}
    
    <span>Halaman {{ transaksi.number }}/{{ transaksi.paginator.num_pages }}</span>
    
    {% if transaksi.has_next %}
    <a href="?page={{ transaksi.next_page_number }}" class="btn btn-outline-secondary">
      <i class="bi bi-chevron-double-right fs-4"></i>
    </a>
    {% endif %}
  </div>
</div>
{% endblock %}